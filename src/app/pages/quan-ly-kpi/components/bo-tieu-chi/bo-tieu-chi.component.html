<div class="py-5">
  <div class="col-md-2 col-sm-12 col-12 col-lg-12">
    <div class="label-card">
      <label class="form-label title-screen text-uppercase"> {{ 'TITLE.KPI_MANAGEMENT' | translate }} </label>
    </div>
  </div>
</div>
<div class="p-4" style="background-color: white">
  <div class="text-break">
    <div class="mb-2">
      <div class="d-flex align-items-center justify-content-between">
        <div>
          <span class="" style="font-weight: 600; font-size: 1.275rem">
            {{ 'TITLE.KPI_MANAGER_CATEGORY' | translate }}
          </span>
        </div>
        <div class="">
          <div
            class="ml-3 px-4 btn btn-outline-primary font-weight-bolder d-flex align-items-center"
            style="height: 38px"
          >
            <i class="fas fa-plus mr-2" style="color: green"></i>
            {{ 'FUNCTION.ADD' | translate }}
          </div>
        </div>
      </div>
    </div>
    <div class="">
      <!-- <mat-form-field appearance="standard">
        <mat-label class="font-14"> <i class="fas fa-search"></i> {{ 'TITLE.SEARCH_ADVANCE' | translate }} </mat-label>
        <input class="border-bottom-danger" matInput #searchInput />
      </mat-form-field> -->
      <mat-form-field appearance="standard">
        <mat-label><i class="fas fa-search"></i> {{ 'TITLE.SEARCH_ADVANCE' | translate }}</mat-label>
        <input matInput (keyup)="applyFilter($event)" #input />
      </mat-form-field>
    </div>
  </div>
</div>

<div class="mat-elevation-z8" style="overflow-x: scroll; width: 100%">
  <table mat-table [dataSource]="dataSource" class="mat-elevation-z8">
    <ng-container matColumnDef="kpiName">
      <th class="" mat-header-cell *matHeaderCellDef style="width: max-content">
        <span [style.paddingLeft.px]="40"> {{ 'TITLE.NAME_KPI' | translate }} </span>
      </th>
      <td class="text-left" mat-cell *matCellDef="let data" style="width: max-content">
        <div style="width: max-content">
          <button
            mat-icon-button
            [style.visibility]="!data.expandable ? 'hidden' : ''"
            [style.marginLeft.px]="data.level * 32"
            (click)="treeControl.toggle(data)"
          >
            <mat-icon class="mat-icon-rtl-mirror">
              {{ treeControl.isExpanded(data) ? 'expand_more' : 'chevron_right' }}
            </mat-icon>
          </button>

          {{ data.kpiName }}
        </div>
      </td>
    </ng-container>

    <ng-container matColumnDef="kpiCode">
      <th mat-header-cell *matHeaderCellDef>{{ 'TITLE.KPI_CODE' | translate }}</th>
      <td mat-cell *matCellDef="let data">{{ data.kpiCode }}</td>
    </ng-container>
    <ng-container matColumnDef="kpiNameVi">
      <th mat-header-cell *matHeaderCellDef>{{ 'TITLE.KPI_NAME_VI' | translate }}</th>
      <td mat-cell *matCellDef="let data">{{ data.kpiNameVi }}</td>
    </ng-container>
    <ng-container matColumnDef="kpiNameLa">
      <th mat-header-cell *matHeaderCellDef>{{ 'TITLE.KPI_NAME_LA' | translate }}</th>
      <td mat-cell *matCellDef="let data">{{ data.kpiNameLa }}</td>
    </ng-container>
    <ng-container matColumnDef="contentVi">
      <th mat-header-cell *matHeaderCellDef>{{ 'TITLE.CONTENT_VI' | translate }}</th>
      <td mat-cell *matCellDef="let data">{{ data.contentVi }}</td>
    </ng-container>
    <ng-container matColumnDef="contentLa">
      <th mat-header-cell *matHeaderCellDef>{{ 'TITLE.CONTENT_LA' | translate }}</th>
      <td mat-cell *matCellDef="let data">{{ data.contentLa }}</td>
    </ng-container>
    <ng-container matColumnDef="kpiPolicyVi">
      <th mat-header-cell *matHeaderCellDef>{{ 'TITLE.KPI_POLICY_VI' | translate }}</th>
      <td mat-cell *matCellDef="let data">{{ data.kpiPolicyVi }}</td>
    </ng-container>
    <ng-container matColumnDef="kpiPolicyLa">
      <th mat-header-cell *matHeaderCellDef>{{ 'TITLE.KPI_POLICY_LA' | translate }}</th>
      <td mat-cell *matCellDef="let data">{{ data.kpiPolicyLa }}</td>
    </ng-container>
    <ng-container matColumnDef="staffCode">
      <th mat-header-cell *matHeaderCellDef>{{ 'TITLE.STAFF_CODE' | translate }}</th>
      <td mat-cell *matCellDef="let data">{{ data.staffCode }}</td>
    </ng-container>
    <ng-container matColumnDef="kpiPoint">
      <th mat-header-cell *matHeaderCellDef>{{ 'TITLE.KPI_POINT' | translate }}</th>
      <td mat-cell *matCellDef="let data">{{ data.kpiPoint }}</td>
    </ng-container>
    <ng-container matColumnDef="beginContractDate">
      <th mat-header-cell *matHeaderCellDef>{{ 'TITLE.BEGIN_CONTRACT_DATE' | translate }}</th>
      <td mat-cell *matCellDef="let data">{{ data.beginContractDate }}</td>
    </ng-container>
    <ng-container matColumnDef="expiredContractDate">
      <th mat-header-cell *matHeaderCellDef>{{ 'TITLE.EXPIRED_CONTRACT_DATE' | translate }}</th>
      <td mat-cell *matCellDef="let data">{{ data.expiredContractDate }}</td>
    </ng-container>

    <!-- action -->
    <ng-container matColumnDef="action">
      <th mat-header-cell *matHeaderCellDef>
        {{ 'LABEL.ACTION' | translate }}
      </th>
      <td mat-cell *matCellDef="let item">
        <div style="min-width: 100px" class="d-flex justify-content-around">
          <div>
            <i
              (click)="eUpdate(item); $event.stopPropagation()"
              data-toggle="tooltip"
              data-placement="top"
              [title]="'FUNCTION.UPDATE' | translate"
              class="fas fa-edit fa-lg p-0 text-warning text-hover-danger cursor-pointer"
            ></i>
          </div>
          <div (click)="eDelete(item); $event.stopPropagation()">
            <i
              data-toggle="tooltip"
              data-placement="top"
              [title]="'TOOLTIP.DELETE' | translate"
              class="fas fa-trash p-0 icon-view-detail text-warning text-hover-danger"
            ></i>
          </div>
        </div>
      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
  </table>
</div>
